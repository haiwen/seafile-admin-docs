
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="seafile">
      
      
        <link rel="canonical" href="https://haiwen.github.io/seafile-admin-docs/11.0/docker/non_docker_to_docker/">
      
      
        <link rel="prev" href="../pro-edition/migrate_ce_to_pro_with_docker/">
      
      
        <link rel="next" href="../seafile_docker_autostart/">
      
      
      <link rel="icon" href="../../media/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Migrate from non-docker deployment - Seafile Admin Manual</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migrate-from-non-docker-seafile-deployment-to-docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Seafile Admin Manual" class="md-header__button md-logo" aria-label="Seafile Admin Manual" data-md-component="logo">
      
  <img src="../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Seafile Admin Manual
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migrate from non-docker deployment
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Seafile Admin Manual" class="md-nav__button md-logo" aria-label="Seafile Admin Manual" data-md-component="logo">
      
  <img src="../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    Seafile Admin Manual
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/file_permission_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File permission management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Seafile Community Setup on Linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Seafile Community Setup on Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/using_mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation with MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/https_with_nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTPS with Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/https_with_apache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTPS with Apache
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Seafile Professional Setup on Linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Seafile Professional Setup on Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/download_and_setup_seafile_professional_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/migrate_from_seafile_community_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration from Seafile Community
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage Backends
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Storage Backends
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/setup_with_amazon_s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon S3 Backend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/setup_with_ceph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph Backend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/setup_with_swift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenStack Swift Backend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/setup_with_oss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alibaba OSS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/multiple_storage_backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple Storage Backends
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/migrate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data migration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cluster Deployment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Cluster Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/deploy_in_a_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy in a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/enable_search_and_background_tasks_in_a_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search and background tasks in a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/memcached_mariadb_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memcache and MariaDB Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/setup_seafile_cluster_with_nfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Seafile cluster with NFS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/seafile_professional_sdition_software_license_agreement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Seafile Setup with Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Seafile Setup with Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy_seafile_with_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Community Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pro-edition/deploy_seafile_pro_with_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Professional Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster/deploy_seafile_cluster_with_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Docker Cluster Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/deploy_with_k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup with Kubernetes (K8s)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pro-edition/migrate_ce_to_pro_with_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration from Seafile Community
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Migrate from non-docker deployment
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Migrate from non-docker deployment
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#migrate" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stop-seafile-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Seafile, Nginx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-mysql-and-the-folders-for-seafile-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare MySQL and the folders for Seafile docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prepare MySQL and the folders for Seafile docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-permissions-to-the-local-mysql-seafile-user" class="md-nav__link">
    <span class="md-ellipsis">
      Add permissions to the local MySQL Seafile user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-required-directories-for-seafile-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      Create the required directories for Seafile Docker image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-config-files" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare config files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-and-modify-docker-composeyml" class="md-nav__link">
    <span class="md-ellipsis">
      Download and modify docker-compose.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-seafile-docker-to-use-the-old-seafile-data" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Seafile Docker to use the old seafile-data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure Seafile Docker to use the old seafile-data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-seafile-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Start Seafile docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    <span class="md-ellipsis">
      Security
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      iptables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binding-based" class="md-nav__link">
    <span class="md-ellipsis">
      Binding based
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seafile_docker_autostart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Docker autostart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced Setup Options
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced Setup Options
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LDAP/AD Integration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            LDAP/AD Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/using_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/using_ldap_pro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP Configuration for Seafile Pro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/ldap_group_sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Importing Groups from LDAP (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/ldap_role_sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Importing Roles from LDAP (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/ldap_in_11.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP in version 11.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/ldap_in_11.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP in version 11.0 (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Single Sign On
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Single Sign On
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/single_sign_on/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OAuth Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/remote_user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote User Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/shibboleth_authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shibboleth Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/auto_login_seadrive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auto Login to SeaDrive on Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/saml2_in_10.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SAML 2.0 in version 10.0+ (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/adfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SAML 2.0 (old) (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/cas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CAS Authentication (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/auth_switch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Switch authentication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Online Office
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Online Office
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/libreoffice_online/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LibreOffice Online Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/only_office/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OnlyOffice Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/office_web_app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Office Online Server Integration (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra_setup/setup_seadoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SeaDoc Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/notification-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notification Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension/webdav/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebDAV extension
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension/fuse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FUSE extension
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virus Scan (Pro)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            Virus Scan (Pro)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/virus_scan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/deploy_clamav_with_seafile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy ClamAV with Seafile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/virus_scan_with_kav4fs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virus Scan With Kav4fs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced User Management (Pro)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            Advanced User Management (Pro)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/multi_institutions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Institutions Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/roles_permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roles and Permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/admin_roles_permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administrator Roles and Permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/multi_tenancy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Tenancy Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/details_about_file_search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced File Search configuration (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/migrate_from_sqlite_to_mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate From SQLite to MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others Deployment Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            Others Deployment Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/start_seafile_at_system_bootup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Start Seafile at System Bootup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/using_logrotate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logrotate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/ocm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Cloud Mesh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/deploy_seafile_behind_nat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy Seafile behind NAT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/deploy_seahub_at_non-root_domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy Seahub at Non-root domain or on custom port
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/fail2ban/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config fail2ban
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/real_time_backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Real-time Backup Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration and Customization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration and Customization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/ccnet-conf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ccnet.conf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/seafile-conf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    seafile.conf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/seahub_settings_py/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    seahub_settings.py
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/seafevents-conf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    seafevents.conf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/seahub_customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seahub customization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/sending_email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Email Sending
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Administration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Account management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/two_factor_authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two-factor Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/security_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/auditing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Access logs and auditing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/export_report/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export report
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/backup_recovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup and Recovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/seafile_fsck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile FSCK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/seafile_gc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile GC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../maintain/clean_database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clean database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_pro/seaf_import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import Directory To Seafile (Pro)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Upgrade Seafile Server
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Upgrade Seafile Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade Seafile Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_a_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade Seafile Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_a_cluster_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade Seafile Cluster (Docker)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_7.0.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 7.0.x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_7.1.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 7.1.x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_8.0.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 8.0.x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_9.0.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 9.0.x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_10.0.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 10.0.x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade_notes_for_11.0.x/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade notes for 11.0.x
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Developing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How to Build Seafile
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            How to Build Seafile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/osx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_seafile/rpi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server binary package
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/translation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Translation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/web_api_v2.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web API V2.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/rene-s/Seafile-PHP-SDK" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PHP API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ChangeLog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            ChangeLog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/server-changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Community Edition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/changelog-for-seafile-professional-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Professional Edition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/client-changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seafile Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/drive-client-changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Drive Client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#migrate" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stop-seafile-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Seafile, Nginx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-mysql-and-the-folders-for-seafile-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare MySQL and the folders for Seafile docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prepare MySQL and the folders for Seafile docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-permissions-to-the-local-mysql-seafile-user" class="md-nav__link">
    <span class="md-ellipsis">
      Add permissions to the local MySQL Seafile user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-required-directories-for-seafile-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      Create the required directories for Seafile Docker image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-config-files" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare config files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-and-modify-docker-composeyml" class="md-nav__link">
    <span class="md-ellipsis">
      Download and modify docker-compose.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-seafile-docker-to-use-the-old-seafile-data" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Seafile Docker to use the old seafile-data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure Seafile Docker to use the old seafile-data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-seafile-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Start Seafile docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    <span class="md-ellipsis">
      Security
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      iptables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binding-based" class="md-nav__link">
    <span class="md-ellipsis">
      Binding based
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="migrate-from-non-docker-seafile-deployment-to-docker">Migrate from non-docker Seafile deployment to docker<a class="headerlink" href="#migrate-from-non-docker-seafile-deployment-to-docker" title="Permanent link">&para;</a></h1>
<p>The recommended steps to migrate from non-docker deployment to docker deployment are:</p>
<ol>
<li>Upgrade the version of the binary package to latest version, and ensure that the system is running normally. (If you running a very old version of Seafile, you can following the <a href="https://cloud.seatable.io/dtable/external-links/7b976c85f504491cbe8e/?tid=0000&amp;vid=0000&amp;row-id=VYQI9DJfRmCv5NggcX4f0Q">FAQ item</a> to migrate to the latest version)</li>
<li>Close Seafile and native Nginx, Memcached</li>
<li>Create the directory needed for Seafile Docker image to run, and copy some files of the locally deployed Seafile to this directory</li>
<li>Download the docker-compose.yml file and configure Seafile Docker to use non-Docker version configuration information to connect to the old MySQL database and the old seafile-data directory.</li>
<li>Start Seafile Docker</li>
</ol>
<p>The following document assumes that the deployment path of your non-Docker version of Seafile is /opt/seafile. If you use other paths, before running the command, be careful to modify the command path.</p>
<blockquote>
<p>Note, you can also refer to the Seafile backup and recovery documentation, deploy Seafile Docker on another machine, and then copy the old configuration information, database, and seafile-data to the new machine to complete the migration. The advantage of this is that even if an error occurs during the migration process, the existing system will not be destroyed.</p>
</blockquote>
<h2 id="migrate">Migrate<a class="headerlink" href="#migrate" title="Permanent link">&para;</a></h2>
<h3 id="stop-seafile-nginx">Stop Seafile, Nginx<a class="headerlink" href="#stop-seafile-nginx" title="Permanent link">&para;</a></h3>
<p>Stop the locally deployed Seafile, Nginx, Memcache</p>
<div class="codehilite"><pre><span></span><code>systemctl stop nginx &amp;&amp;  systemctl disable nginx
systemctl stop memcached &amp;&amp;  systemctl disable memcached
./seafile.sh stop  &amp;&amp; ./seahub.sh stop
</code></pre></div>

<h3 id="prepare-mysql-and-the-folders-for-seafile-docker">Prepare MySQL and the folders for Seafile docker<a class="headerlink" href="#prepare-mysql-and-the-folders-for-seafile-docker" title="Permanent link">&para;</a></h3>
<h4 id="add-permissions-to-the-local-mysql-seafile-user">Add permissions to the local MySQL Seafile user<a class="headerlink" href="#add-permissions-to-the-local-mysql-seafile-user" title="Permanent link">&para;</a></h4>
<p>The non-Docker version uses the local MySQL. Now if the Docker version of Seafile connects to this MySQL, you need to increase the corresponding access permissions.</p>
<p>The following commands are based on that you use <code>seafile</code> as the user to access:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">## Note, change the password according to the actual password you use</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;seafile&#39;</span><span class="nv">@&#39;%&#39;</span><span class="w"> </span><span class="k">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;your-password&#39;</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">OPTION</span><span class="p">;</span>

<span class="c1">## Grant seafile user can connect the database from any IP address</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n n-Quoted">`ccnet_db`</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="s1">&#39;seafile&#39;</span><span class="nv">@&#39;%&#39;</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n n-Quoted">`seafile_db`</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="s1">&#39;seafile&#39;</span><span class="nv">@&#39;%&#39;</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n n-Quoted">`seahub_db`</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="s1">&#39;seafile&#39;</span><span class="nv">@&#39;%&#39;</span><span class="p">;</span>

<span class="c1">## Restart MySQL</span>
<span class="n">systemctl</span><span class="w"> </span><span class="k">restart</span><span class="w"> </span><span class="n">mariadb</span>
</code></pre></div>

<h4 id="create-the-required-directories-for-seafile-docker-image">Create the required directories for Seafile Docker image<a class="headerlink" href="#create-the-required-directories-for-seafile-docker-image" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>mkdir -p /opt/seafile-data/seafile
</code></pre></div>

<h4 id="prepare-config-files">Prepare config files<a class="headerlink" href="#prepare-config-files" title="Permanent link">&para;</a></h4>
<p>Copy the original config files to the directory to be mapped by the docker version of seafile</p>
<div class="codehilite"><pre><span></span><code>cp -r /opt/seafile/conf  /opt/seafile-data/seafile
cp -r /opt/seafile/seahub-data  /opt/seafile-data/seafile
</code></pre></div>

<p>Modify the MySQL configuration in <code>/opt/seafile-data/seafile/conf</code>, including <code>ccnet.conf</code>, <code>seafile.conf</code>, <code>seahub_settings</code>, change <code>HOST=127.0.0.1</code> to <code>HOST=&lt;local ip&gt;</code>.</p>
<p>Modify the memcached configuration in <code>seahub_settings.py</code> to use the Docker version of Memcached: change it to <code>'LOCATION': 'memcached:11211'</code> (the network name of Docker version of Memcached is <code>memcached</code>).</p>
<h4 id="download-and-modify-docker-composeyml">Download and modify docker-compose.yml<a class="headerlink" href="#download-and-modify-docker-composeyml" title="Permanent link">&para;</a></h4>
<p>Download <a href="https://manual.seafile.com/docker/pro-edition/10.0/docker-compose.yml">docker-compose.yml</a> to <code>/opt/seafile-data</code>. Comment out the db part as below:</p>
<div class="codehilite"><pre><span></span><code><span class="n">services</span><span class="p">:</span>
<span class="c1">#  db:</span>
<span class="c1">#    image: mariadb:10.5</span>
<span class="c1">#    container_name: seafile-mysql</span>
<span class="c1">#    environment:</span>
<span class="c1">#      - MYSQL_ROOT_PASSWORD=db_dev  # Required, set the root&#39;s password of MySQL service.</span>
<span class="c1">#      - MYSQL_LOG_CONSOLE=true</span>
<span class="c1">#    volumes:</span>
<span class="c1">#      - /opt/seafile-mysql/db:/var/lib/mysql  # Required, specifies the path to MySQL data persistent store.</span>
<span class="c1">#    networks:</span>
<span class="c1">#      - seafile-net</span>

<span class="o">.........</span>
<span class="w">   </span><span class="n">depends_on</span><span class="p">:</span>
<span class="c1">#     - db             </span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">memcached</span>
<span class="o">.........</span>
</code></pre></div>

<h3 id="configure-seafile-docker-to-use-the-old-seafile-data">Configure Seafile Docker to use the old seafile-data<a class="headerlink" href="#configure-seafile-docker-to-use-the-old-seafile-data" title="Permanent link">&para;</a></h3>
<p>There are two ways to let Seafile Docker to use the old seafile-data</p>
<h4 id="method-1">Method 1<a class="headerlink" href="#method-1" title="Permanent link">&para;</a></h4>
<p>You can copy or move the old seafile-data folder (<code>/opt/seafile/seafile-data</code>) to <code>/opt/seafile-data/seafile</code> (So you will have <code>/opt/seafile-data/seafile/seafile-data</code>)</p>
<h4 id="method-2">Method 2<a class="headerlink" href="#method-2" title="Permanent link">&para;</a></h4>
<p>You can mount the old seafile-data folder (<code>/opt/seafile/seafile-data</code>) to Seafile docker container directly:</p>
<div class="codehilite"><pre><span></span><code>.........

    seafile:
    image: seafileltd/seafile-mc:8.0.7-1
    container_name: seafile
    ports:
      <span class="k">-</span> &quot;80:80&quot;
<span class="gh">#</span>      - &quot;443:443&quot;  # If https is enabled, cancel the comment.
    volumes:
      <span class="k">-</span> /opt/seafile-data:/shared
      <span class="k">-</span> /opt/seafile/seafile-data:/shared/seafile/seafile-data
  .......
</code></pre></div>

<p>The added line <code>- /opt/seafile/seafile-data:/shared/seafile/seafile-data</code> mount <code>/opt/seafile/seafile-data</code> to <code>/shared/seafile/seafile-data</code> in docker.</p>
<h3 id="start-seafile-docker">Start Seafile docker<a class="headerlink" href="#start-seafile-docker" title="Permanent link">&para;</a></h3>
<p>Start Seafile docker and check if everything is okay:</p>
<div class="codehilite"><pre><span></span><code>cd /opt/seafile-data
docker compose  up -d
</code></pre></div>

<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h2>
<p>While it is not possible from inside a docker container to connect to the host database via localhost but via <code>&lt;local ip&gt;</code> you also need to bind your databaseserver to that IP. If this IP is public, it is strongly advised to protect your database port with a firewall. Otherwise your databases are reachable via internet.
An alternative might be to start another local IP from <a href="https://tools.ietf.org/html/rfc1597">RFC 1597</a> e.g. <code>192.168.123.45</code>. Afterwards you can bind to that IP.</p>
<h3 id="iptables">iptables<a class="headerlink" href="#iptables" title="Permanent link">&para;</a></h3>
<p>Following iptables commands protect MariaDB/MySQL:</p>
<div class="codehilite"><pre><span></span><code>iptables -A INPUT -s 172.16.0.0/12 -j ACCEPT #Allow Dockernetworks
iptables -A INPUT -p tcp -m tcp --dport 3306 -j DROP #Deny Internet
ip6tables -A INPUT -p tcp -m tcp --dport 3306 -j DROP #Deny Internet
</code></pre></div>

<p>Keep in mind this is not bootsafe!</p>
<h3 id="binding-based">Binding based<a class="headerlink" href="#binding-based" title="Permanent link">&para;</a></h3>
<p>For Debian based Linux Distros you can start a local IP by adding in <code>/etc/network/interfaces</code> something like:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">iface</span><span class="w"> </span><span class="nx">eth0</span><span class="w"> </span><span class="nx">inet</span><span class="w"> </span><span class="nx">static</span>
<span class="w">  </span><span class="nx">address</span><span class="w"> </span><span class="m m-Double">192.168.123.45</span><span class="o">/</span><span class="mi">32</span>
</code></pre></div>

<p><code>eth0</code> might be <code>ensXY</code>. Or if you know how to start a dummy interface, thats even better.</p>
<p>SUSE based is by editing <code>/etc/sysconfig/network/ifcfg-eth0</code> (ethXY/ensXY/bondXY)</p>
<p>If using MariaDB the server just can bind to one IP-address (192.158.1.38 or 0.0.0.0 (internet)). So if you bind your MariaDB server to that new address other applications might need some reconfigurement.</p>
<p>In <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code> edit the following line to:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">bind</span><span class="o">-</span><span class="nx">address</span><span class="w">    </span><span class="p">=</span><span class="w"> </span><span class="m m-Double">192.168.123.45</span>
</code></pre></div>

<p>then edit /opt/seafile-data/seafile/conf/ -&gt; ccnet.conf seafile.conf seahub_settings.py in the Host-Line to that IP and execute the following commands:</p>
<div class="codehilite"><pre><span></span><code><span class="n">service</span><span class="w"> </span><span class="n">networking</span><span class="w"> </span><span class="n">reload</span>
<span class="n">ip</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="c1">#to check whether the ip is present</span>
<span class="n">service</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="n">restart</span>
<span class="n">ss</span><span class="w"> </span><span class="o">-</span><span class="n">tulpen</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="mi">3306</span><span class="w"> </span><span class="c1">#to check whether the database listens on the correct IP</span>
<span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">seafile</span><span class="o">-</span><span class="n">data</span><span class="o">/</span>
<span class="n">docker</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="n">down</span>
<span class="n">docker</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="o">-</span><span class="n">d</span>

<span class="c1">## restart your applications</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Seafile Ltd.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/haiwen/seafile-admin-docs/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>